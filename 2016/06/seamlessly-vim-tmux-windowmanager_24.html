<!doctype html>
<html lang="en">
    <head>
        <title>Silly Bytes</title>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" type="image/png" href="../../img/favicon.png" />

        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/post-list.css" />
        <link rel="stylesheet" href="../../css/post.css" />

        <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../bower_components/highlight/src/styles/solarized-light.css" />

        <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
        <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../../bower_components/highlight/src/highlight.pack.js"></script>

        <script> hljs.initHighlightingOnLoad(); </script>

    </head>
    <body>
        <header class="container-fluid">
            <div class="row">
                <div class="col-xs-12">
                    <a href="../../">
                        <img alt="Silly Bytes" id="logo" class="image-responsive" src="../../img/silly-bytes_logo.png" />
                    </a>
                </div>
            </div>
        </header>

        <div id="blog" class="container-fluid">
            <div class="row">

                <div id="sidebar" class="hidden-xs hidden-sm col-md-3">
                    <div id="author">
    <img id="author-pic" src="../../img/daniel.jpg">
    <h3 id="author-name">Daniel Campoverde [alx741]</h3>
    <img id="location-icon" src="../../img/location_icon.png">
    <span id="location">Cuenca, Ecuador</span>
</div>

<div id="findme">
    <h2 class="sidebar-h2">FIND ME</h2>
    <a target="_blank" href="https://gitlab.com/alx741">
        <img class="icon" src="../../img/gitlab.png">
    </a>
    <a target="_blank" href="https://github.com/alx741">
        <img class="icon" src="../../img/github.png">
    </a>
    <a target="_blank" href="https://twitter.com/alx741alx">
        <img class="icon" src="../../img/twitter.png">
    </a>
    <a target="_blank" href="https://www.facebook.com/sillybytes/">
        <img class="icon" src="../../img/facebook.png">
    </a>
    <a target="_blank" href="https://plus.google.com/116038619580828681039">
        <img class="icon" src="../../img/google.png">
    </a>

    <div id="findme-textual">
        <b>Freenode:</b> #vim, #archlinux, #avr, #rust, #haskell,
        #yesod, #zsh
        <hr>
        <b>Mailto:</b> alx@sillybytes.net
        <br>
        <b>GPG Key ID:</b> <a href="http://pgp.mit.edu/pks/lookup?op=get&search=0xEB0E776276450F22">76450F22</a>
        <hr>
        <b>Subscribe:</b> <a href="http://www.sillybytes.net/atom.xml">
            <img id="rss-img" alt="rss" src="../../img/rss.png" /> </a>
    </div>


    <div id="facebook-embed">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fsillybytes&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=true&amp;stream=false&amp;show_border=true" scrolling="yes" style="border:none; overflow:hidden;" allowtransparency="false" frameborder="0"></iframe>
    </div>
</div>

<div id="random">
    <h2 class="sidebar-h2">YOU MIGHT LIKE</h2>

    <div id="random-posts">
        <ul>
        </ul>
    </div>
</div>

<div id="about">
    <h2 class="sidebar-h2">ABOUT</h2>

    <a target="_blank" href="http://www.haskellers.com/user/4344">
        <img id="haskellers-img" class="badge" alt="I'm a Haskeller" src="../../img/haskellers.png">
    </a>

    <img id="fsf-img" class="badge" alt="Free Software Fundation Member" src="../../img/fsf.png">

    <a target="_blank" href="http://internetdefenseleague.org/">
        <img id="idl-img" class="badge" alt="Internet Defesen League" src="../../img/idl.png">
    </a>
</div>

<div id="dotfiles">
    <h2 class="sidebar-h2">DOTFILES</h2>
    <p>
        Software configuration, scripts, tools and magic.
        Be sure to add <b>attribution </b> when using them
        (fully or partially).
    </p>
    <a target="_blank" href="https://github.com/alx741/dotfiles#readme">
        <img id="dotfiles-img" src="../../img/dotfiles.png">
    </a>
</div>


<div id="license">
    <h2 class="sidebar-h2">LICENSE</h2>

    <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
        <img id="cc-img" alt="Creative Commons - SA - BY" src="../../img/cc.png">
    </a>
    <p id="cc-text">
        Silly Bytes by Daniel Alejandro Campoverde Carri√≥n
        [alx741] is licensed under a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported License.
        </a>
    </p>
</div>

                </div>

                <div id="content" class="col-xs-12 col-md-9">
                    <div class="row">
    <div class="post col-xs-12">
        <h2 class="post-title">Seamlessly Vim-Tmux-WindowManager-Monitor navigator</h2>
        <div class="post-date-author">
            Posted on June 24, 2016
            
                by Daniel Campoverde
            
        </div>
        <div class="post-content">
            <p><img src="../../img/navigator/thumbnail.jpg" class="img-responsive" /></p>
<p><a href="https://robots.thoughtbot.com/seamlessly-navigate-vim-and-tmux-splits">This Thoughtbot post</a> describes how to make Vim and Tmux <em>work together in Harmony</em> based on <a href="https://github.com/christoomey/vim-tmux-navigator">this crhistoomey plugin</a>, allowing you to traverse both your Vim and Tmux windows and panes respectively.</p>
<!--more-->
<p>Having the ability to traverse Vim and Tmux splits without having to think about it using <code>ctrl-h</code>, <code>ctrl-j</code>, <code>ctrl-k</code>, <code>ctrl-l</code> is fantastic! But I still had an annoyance source from the window manager (Ratpoison) and the multi monitor setup.</p>
<p>So I took the same concept and extend it to those uses cases, so now I use <code>ctrl-h</code>, <code>ctrl-j</code>, <code>ctrl-k</code>, <code>ctrl-l</code> to move through my <strong>Window Manager splits</strong>, my <strong>Tmux panes</strong>, my <strong>Vim windows</strong> and my <strong>Monitors</strong> with minimum mental overhead. Here is how.</p>
<p>Some of the scripts are a bit of complex, so instead of explaining them in detail the general algorithm is described.</p>
<h1 id="frame-monitor-navigation">Frame-Monitor Navigation</h1>
<p><img src="../../img/navigator/shot1.jpg" class="img-left" /></p>
<p>When traversing frames (Ratpoison splits) it stops at the end of the current monitor, so first I needed to change to the left or right monitor when a movement command is triggered at the edge of the current one.</p>
<p>The script <a href="https://github.com/alx741/dotfiles/blob/master/scripts/.scripts/ratpoison/frame-mon_navigator.sh">frame-mon_navigator.sh</a> calculates if the current frame is the rightmost or the leftmost in the current monitor, if it is, it goes to the next of previous monitor depending on the movement command.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">#!/bin/sh</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="ex">ratpoison</span> -c <span class="st">'fdump'</span><span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/,/\n/g'</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{print $5&quot; &quot;$19}'</span> <span class="op">&gt;</span> /tmp/ratpoison_frame_monitor_navigator</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># Calculate X coordinate for rightmost frame</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="va">greater_x_coordinate=</span>0</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">while</span> <span class="bu">read</span> <span class="va">frame</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="va">coordinate=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$frame</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f1<span class="va">)</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">    <span class="kw">if [[</span> <span class="va">$coordinate</span> <span class="ot">-gt</span> <span class="va">$greater_x_coordinate</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">        <span class="va">greater_x_coordinate=$coordinate</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">/tmp/ratpoison_frame_monitor_navigator</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co"># Calculate current frame X coordinate</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="va">x_coordinate=$(</span><span class="fu">head</span> -n1 /tmp/ratpoison_frame_monitor_navigator <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f1<span class="va">)</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="va">last_access=$(</span><span class="fu">head</span> -n1 /tmp/ratpoison_frame_monitor_navigator <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f2<span class="va">)</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="kw">while</span> <span class="bu">read</span> <span class="va">frame</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20">    <span class="va">access=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$frame</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f2<span class="va">)</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21">    <span class="kw">if [[</span> <span class="va">$access</span> <span class="ot">-gt</span> <span class="va">$last_access</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">        <span class="va">last_access=$access</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24">        <span class="va">x_coordinate=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$frame</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f1<span class="va">)</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">/tmp/ratpoison_frame_monitor_navigator</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="kw">function</span><span class="fu"> is_leftmost</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="kw">{</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30">    <span class="kw">if [[</span> <span class="va">$x_coordinate</span> <span class="ot">-eq</span> 0<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">        <span class="bu">return</span> 0</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-33" data-line-number="33">        <span class="bu">return</span> 1</a>
<a class="sourceLine" id="cb1-34" data-line-number="34">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="kw">}</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="kw">function</span><span class="fu"> is_rightmost</span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="kw">{</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39">    <span class="kw">if [[</span> <span class="va">$x_coordinate</span> <span class="ot">-eq</span> <span class="va">$greater_x_coordinate</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40">        <span class="bu">return</span> 0</a>
<a class="sourceLine" id="cb1-41" data-line-number="41">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-42" data-line-number="42">        <span class="bu">return</span> 1</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-44" data-line-number="44"><span class="kw">}</span></a>
<a class="sourceLine" id="cb1-45" data-line-number="45"></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="co"># Go to previous screen if currently if leftmost frame</span></a>
<a class="sourceLine" id="cb1-47" data-line-number="47"><span class="co"># Go to next screen if currently if rightmost frame</span></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="co"># Execute frame focus otherwise</span></a>
<a class="sourceLine" id="cb1-49" data-line-number="49"><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;left&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50">    <span class="kw">if</span> <span class="ex">is_leftmost</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-51" data-line-number="51">        <span class="ex">ratpoison</span> -c <span class="st">'prevscreen'</span></a>
<a class="sourceLine" id="cb1-52" data-line-number="52">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53">        <span class="ex">ratpoison</span> -c <span class="st">'focusleft'</span></a>
<a class="sourceLine" id="cb1-54" data-line-number="54">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-55" data-line-number="55"><span class="kw">elif [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;right&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56">    <span class="kw">if</span> <span class="ex">is_rightmost</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-57" data-line-number="57">        <span class="ex">ratpoison</span> -c <span class="st">'nextscreen'</span></a>
<a class="sourceLine" id="cb1-58" data-line-number="58">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-59" data-line-number="59">        <span class="ex">ratpoison</span> -c <span class="st">'focusright'</span></a>
<a class="sourceLine" id="cb1-60" data-line-number="60">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-61" data-line-number="61"><span class="kw">fi</span></a></code></pre></div>
<h1 id="ratpoison-tmux-navigator">Ratpoison-Tmux Navigator</h1>
<p><img src="../../img/navigator/shot2.jpg" class="img-left" /></p>
<p>We need a way to pass movement commands to Tmux so Vim-Tmux navigation works as always, but we also need to pass movement commands from Tmux to Ratpoison when a movement command is triggered from Tmux edge pane.</p>
<p>The script <a href="https://github.com/alx741/dotfiles/blob/master/scripts/.scripts/ratpoison/rat_tmux-navigator.sh">rat_tmux-navigator.sh</a> is able to tell if the terminal emulator (Urxvt) is currently focused and, if so, send the movement commands to Tmux so it can handle panes traversing as usual. It also define functions that Tmux can use to know if a edge pane is reached and send the movement commands to Ratpoison through the <strong>frame-mon_navigator.sh</strong> script so Frame-Monitor navigation is included in the process.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;rat&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="va">current_window=$(</span><span class="ex">ratpoison</span> -c <span class="st">'info'</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/(.*).*(\(.*\))/\1/'</span>\</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">                <span class="kw">|</span> <span class="fu">tr</span> <span class="st">'[:upper:]'</span> <span class="st">'[:lower:]'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">elif [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;tmux&quot;</span><span class="kw"> ]]</span>;<span class="kw">then</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="va">window_bottom=$(</span><span class="ex">tmux</span> list-panes -F <span class="st">&quot;#{window_height}&quot;</span> <span class="kw">|</span> <span class="fu">head</span> -n1<span class="va">)</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="va">window_right=$(</span><span class="ex">tmux</span> list-panes -F <span class="st">&quot;#{window_width}&quot;</span> <span class="kw">|</span> <span class="fu">head</span> -n1<span class="va">)</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="va">window_bottom=$(($window_bottom</span> - 1<span class="va">))</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="va">window_right=$(($window_right</span> - 1<span class="va">))</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="va">pane=$(</span><span class="ex">tmux</span> list-panes -F <span class="st">&quot;#{pane_left} #{pane_right} #{pane_top} #{pane_bottom} #{pane_active}&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">'.* 1$'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="va">pane_left=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$pane</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f 1<span class="va">)</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="va">pane_right=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$pane</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f 2<span class="va">)</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15">    <span class="va">pane_top=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$pane</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f 3<span class="va">)</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="va">pane_bottom=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$pane</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">' '</span> -f 4<span class="va">)</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="kw">function</span><span class="fu"> rat_up</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$current_window</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;urxvt&quot;</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23">        <span class="ex">ratpoison</span> -c <span class="st">'meta C-k'</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25">        <span class="ex">ratpoison</span> -c <span class="st">'focusup'</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="kw">function</span><span class="fu"> rat_down</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$current_window</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;urxvt&quot;</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-32" data-line-number="32">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33">        <span class="ex">ratpoison</span> -c <span class="st">'meta C-j'</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35">        <span class="ex">ratpoison</span> -c <span class="st">'focusdown'</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="kw">function</span><span class="fu"> rat_right</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$current_window</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;urxvt&quot;</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-42" data-line-number="42">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43">        <span class="ex">ratpoison</span> -c <span class="st">'meta C-l'</span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45">        <span class="ex">~/.scripts/ratpoison/frame-mon_navigator.sh</span> right</a>
<a class="sourceLine" id="cb2-46" data-line-number="46">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-47" data-line-number="47"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-48" data-line-number="48"></a>
<a class="sourceLine" id="cb2-49" data-line-number="49"><span class="kw">function</span><span class="fu"> rat_left</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-51" data-line-number="51">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$current_window</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;urxvt&quot;</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-52" data-line-number="52">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-53" data-line-number="53">        <span class="ex">ratpoison</span> -c <span class="st">'meta C-h'</span></a>
<a class="sourceLine" id="cb2-54" data-line-number="54">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-55" data-line-number="55">        <span class="ex">~/.scripts/ratpoison/frame-mon_navigator.sh</span> left</a>
<a class="sourceLine" id="cb2-56" data-line-number="56">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-57" data-line-number="57"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-58" data-line-number="58"></a>
<a class="sourceLine" id="cb2-59" data-line-number="59"><span class="kw">function</span><span class="fu"> tmux_up</span></a>
<a class="sourceLine" id="cb2-60" data-line-number="60"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-61" data-line-number="61">    <span class="kw">if [[</span> <span class="va">$pane_top</span>  <span class="ot">-eq</span> 0<span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-62" data-line-number="62">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-63" data-line-number="63">        <span class="ex">ratpoison</span> -c <span class="st">'focusup'</span></a>
<a class="sourceLine" id="cb2-64" data-line-number="64">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-65" data-line-number="65">        <span class="ex">tmux</span> select-pane -U</a>
<a class="sourceLine" id="cb2-66" data-line-number="66">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-67" data-line-number="67"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-68" data-line-number="68"></a>
<a class="sourceLine" id="cb2-69" data-line-number="69"><span class="kw">function</span><span class="fu"> tmux_down</span></a>
<a class="sourceLine" id="cb2-70" data-line-number="70"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-71" data-line-number="71">    <span class="kw">if [[</span> <span class="va">$pane_bottom</span>  <span class="ot">-eq</span> <span class="va">$window_bottom</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-72" data-line-number="72">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-73" data-line-number="73">        <span class="ex">ratpoison</span> -c <span class="st">'focusdown'</span></a>
<a class="sourceLine" id="cb2-74" data-line-number="74">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-75" data-line-number="75">        <span class="ex">tmux</span> select-pane -D</a>
<a class="sourceLine" id="cb2-76" data-line-number="76">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-77" data-line-number="77"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-78" data-line-number="78"></a>
<a class="sourceLine" id="cb2-79" data-line-number="79"><span class="kw">function</span><span class="fu"> tmux_right</span></a>
<a class="sourceLine" id="cb2-80" data-line-number="80"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-81" data-line-number="81">    <span class="kw">if [[</span> <span class="va">$pane_right</span>  <span class="ot">-eq</span> <span class="va">$window_right</span><span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-82" data-line-number="82">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-83" data-line-number="83">        <span class="ex">~/.scripts/ratpoison/frame-mon_navigator.sh</span> right</a>
<a class="sourceLine" id="cb2-84" data-line-number="84">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-85" data-line-number="85">        <span class="ex">tmux</span> select-pane -R</a>
<a class="sourceLine" id="cb2-86" data-line-number="86">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-87" data-line-number="87"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-88" data-line-number="88"></a>
<a class="sourceLine" id="cb2-89" data-line-number="89"><span class="kw">function</span><span class="fu"> tmux_left</span></a>
<a class="sourceLine" id="cb2-90" data-line-number="90"><span class="kw">{</span></a>
<a class="sourceLine" id="cb2-91" data-line-number="91">    <span class="kw">if [[</span> <span class="va">$pane_left</span>  <span class="ot">-eq</span> 0<span class="kw"> ]]</span>;</a>
<a class="sourceLine" id="cb2-92" data-line-number="92">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb2-93" data-line-number="93">        <span class="ex">~/.scripts/ratpoison/frame-mon_navigator.sh</span> left</a>
<a class="sourceLine" id="cb2-94" data-line-number="94">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb2-95" data-line-number="95">        <span class="ex">tmux</span> select-pane -L</a>
<a class="sourceLine" id="cb2-96" data-line-number="96">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb2-97" data-line-number="97"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-98" data-line-number="98"></a>
<a class="sourceLine" id="cb2-99" data-line-number="99"></a>
<a class="sourceLine" id="cb2-100" data-line-number="100"><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;rat&quot;</span><span class="kw"> ]]</span>;<span class="kw">then</span></a>
<a class="sourceLine" id="cb2-101" data-line-number="101">    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb2-102" data-line-number="102">        <span class="st">'up'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-103" data-line-number="103">            <span class="ex">rat_up</span></a>
<a class="sourceLine" id="cb2-104" data-line-number="104">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-105" data-line-number="105">        <span class="st">'down'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-106" data-line-number="106">            <span class="ex">rat_down</span></a>
<a class="sourceLine" id="cb2-107" data-line-number="107">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-108" data-line-number="108">        <span class="st">'right'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-109" data-line-number="109">            <span class="ex">rat_right</span></a>
<a class="sourceLine" id="cb2-110" data-line-number="110">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-111" data-line-number="111">        <span class="st">'left'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-112" data-line-number="112">            <span class="ex">rat_left</span></a>
<a class="sourceLine" id="cb2-113" data-line-number="113">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-114" data-line-number="114">    <span class="kw">esac</span></a>
<a class="sourceLine" id="cb2-115" data-line-number="115"></a>
<a class="sourceLine" id="cb2-116" data-line-number="116"><span class="kw">elif [[</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;tmux&quot;</span><span class="kw"> ]]</span>;<span class="kw">then</span></a>
<a class="sourceLine" id="cb2-117" data-line-number="117">    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb2-118" data-line-number="118">        <span class="st">'up'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-119" data-line-number="119">            <span class="ex">tmux_up</span></a>
<a class="sourceLine" id="cb2-120" data-line-number="120">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-121" data-line-number="121">        <span class="st">'down'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-122" data-line-number="122">            <span class="ex">tmux_down</span></a>
<a class="sourceLine" id="cb2-123" data-line-number="123">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-124" data-line-number="124">        <span class="st">'right'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-125" data-line-number="125">            <span class="ex">tmux_right</span></a>
<a class="sourceLine" id="cb2-126" data-line-number="126">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-127" data-line-number="127">        <span class="st">'left'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb2-128" data-line-number="128">            <span class="ex">tmux_left</span></a>
<a class="sourceLine" id="cb2-129" data-line-number="129">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb2-130" data-line-number="130">    <span class="kw">esac</span></a>
<a class="sourceLine" id="cb2-131" data-line-number="131"><span class="kw">fi</span></a></code></pre></div>
<h1 id="vim-tmux-navigator">Vim-Tmux Navigator</h1>
<p>Modifying Tmux mappings to use above scripts will make it work for Tmux-Ratpoison traversing but when a Vim instance is on an Tmux edge pane it will not jump to the appropriate Ratpoison split. To solve it I forked the <code>vim-tmux-navigator</code> project and made the right changes to it in the <a href="https://github.com/alx741/vim-tmux-navigator/tree/vim-tmux-wm-monitor">vim-tmux-wm-monitor branch</a></p>
<p>Then using <a href="https://github.com/junegunn/vim-plug">vim-plug</a> I install it in my <code>.vimrc</code> with:</p>
<pre><code>Plug 'alx741/vim-tmux-navigator', { 'branch': 'vim-tmux-wm-monitor' }</code></pre>
<h1 id="mappings">Mappings</h1>
<p>Putting all together requires the appropriate mappings for Ratpoison and Tmux. Vim is already configured with the forked plugin.</p>
<h2 id="ratpoison">Ratpoison</h2>
<p>These lines on <code>.ratpoisonrc</code> will do the top level handling. Take into account the path to the <code>rat_tmux-navigator.sh</code> script.</p>
<pre><code>definekey top C-k exec ~/.scripts/ratpoison/rat_tmux-navigator.sh rat up
definekey top C-j exec ~/.scripts/ratpoison/rat_tmux-navigator.sh rat down
definekey top C-l exec ~/.scripts/ratpoison/rat_tmux-navigator.sh rat right
definekey top C-h exec ~/.scripts/ratpoison/rat_tmux-navigator.sh rat left</code></pre>
<h2 id="tmux">Tmux</h2>
<p>Finally these lines on <code>.tmux.conf</code> are basically modified versions of the <code>vim-tmux-navigator</code> plugin ones.</p>
<pre><code>is_vim=&quot;ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'&quot;
bind-key C-h if-shell &quot;$is_vim&quot; &quot;send-keys C-h&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux left'&quot;
bind-key C-j if-shell &quot;$is_vim&quot; &quot;send-keys C-j&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux down'&quot;
bind-key C-k if-shell &quot;$is_vim&quot; &quot;send-keys C-k&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux up'&quot;
bind-key C-l if-shell &quot;$is_vim&quot; &quot;send-keys C-l&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux right'&quot;
bind-key -n C-h if-shell &quot;$is_vim&quot; &quot;send-keys C-h&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux left'&quot;
bind-key -n C-j if-shell &quot;$is_vim&quot; &quot;send-keys C-j&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux down'&quot;
bind-key -n C-k if-shell &quot;$is_vim&quot; &quot;send-keys C-k&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux up'&quot;
bind-key -n C-l if-shell &quot;$is_vim&quot; &quot;send-keys C-l&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux right'&quot;
bind-key h if-shell &quot;$is_vim&quot; &quot;send-keys C-h&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux left'&quot;
bind-key j if-shell &quot;$is_vim&quot; &quot;send-keys C-j&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux down'&quot;
bind-key k if-shell &quot;$is_vim&quot; &quot;send-keys C-k&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux up'&quot;
bind-key l if-shell &quot;$is_vim&quot; &quot;send-keys C-l&quot;  &quot;run '~/.scripts/ratpoison/rat_tmux-navigator.sh tmux right'&quot;</code></pre>
        </div>
    </div>
</div>


                    <div class="row">
                        <div class="col-sm-4">
                            
                        </div>

                        <div class="col-sm-4">
                            <a class="archive" href="../../archive.html">Archive</a>
                        </div>

                        <div class="col-sm-4">
                            
                        </div>
                    </div>
                </div>

            </div>
        </div>


        <footer class="container-fluid">
            <div class="row">
                <div id="sidebar" class="visible-xs visible-sm col-xs-12">
                    <div id="author">
    <img id="author-pic" src="../../img/daniel.jpg">
    <h3 id="author-name">Daniel Campoverde [alx741]</h3>
    <img id="location-icon" src="../../img/location_icon.png">
    <span id="location">Cuenca, Ecuador</span>
</div>

<div id="findme">
    <h2 class="sidebar-h2">FIND ME</h2>
    <a target="_blank" href="https://gitlab.com/alx741">
        <img class="icon" src="../../img/gitlab.png">
    </a>
    <a target="_blank" href="https://github.com/alx741">
        <img class="icon" src="../../img/github.png">
    </a>
    <a target="_blank" href="https://twitter.com/alx741alx">
        <img class="icon" src="../../img/twitter.png">
    </a>
    <a target="_blank" href="https://www.facebook.com/sillybytes/">
        <img class="icon" src="../../img/facebook.png">
    </a>
    <a target="_blank" href="https://plus.google.com/116038619580828681039">
        <img class="icon" src="../../img/google.png">
    </a>

    <div id="findme-textual">
        <b>Freenode:</b> #vim, #archlinux, #avr, #rust, #haskell,
        #yesod, #zsh
        <hr>
        <b>Mailto:</b> alx@sillybytes.net
        <br>
        <b>GPG Key ID:</b> <a href="http://pgp.mit.edu/pks/lookup?op=get&search=0xEB0E776276450F22">76450F22</a>
        <hr>
        <b>Subscribe:</b> <a href="http://www.sillybytes.net/atom.xml">
            <img id="rss-img" alt="rss" src="../../img/rss.png" /> </a>
    </div>


    <div id="facebook-embed">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fsillybytes&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=true&amp;stream=false&amp;show_border=true" scrolling="yes" style="border:none; overflow:hidden;" allowtransparency="false" frameborder="0"></iframe>
    </div>
</div>

<div id="random">
    <h2 class="sidebar-h2">YOU MIGHT LIKE</h2>

    <div id="random-posts">
        <ul>
        </ul>
    </div>
</div>

<div id="about">
    <h2 class="sidebar-h2">ABOUT</h2>

    <a target="_blank" href="http://www.haskellers.com/user/4344">
        <img id="haskellers-img" class="badge" alt="I'm a Haskeller" src="../../img/haskellers.png">
    </a>

    <img id="fsf-img" class="badge" alt="Free Software Fundation Member" src="../../img/fsf.png">

    <a target="_blank" href="http://internetdefenseleague.org/">
        <img id="idl-img" class="badge" alt="Internet Defesen League" src="../../img/idl.png">
    </a>
</div>

<div id="dotfiles">
    <h2 class="sidebar-h2">DOTFILES</h2>
    <p>
        Software configuration, scripts, tools and magic.
        Be sure to add <b>attribution </b> when using them
        (fully or partially).
    </p>
    <a target="_blank" href="https://github.com/alx741/dotfiles#readme">
        <img id="dotfiles-img" src="../../img/dotfiles.png">
    </a>
</div>


<div id="license">
    <h2 class="sidebar-h2">LICENSE</h2>

    <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
        <img id="cc-img" alt="Creative Commons - SA - BY" src="../../img/cc.png">
    </a>
    <p id="cc-text">
        Silly Bytes by Daniel Alejandro Campoverde Carri√≥n
        [alx741] is licensed under a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported License.
        </a>
    </p>
</div>

                </div>
            </div>
        </footer>

        <script type="text/javascript" src="../../js/random_posts.js"></script>

    </body>
</html>
