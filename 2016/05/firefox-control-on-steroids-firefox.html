<!doctype html>
<html lang="en">
    <head>
        <title>Silly Bytes</title>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" type="image/png" href="../../img/favicon.png" />

        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/post-list.css" />
        <link rel="stylesheet" href="../../css/post.css" />

        <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../bower_components/highlight/src/styles/solarized-light.css" />

        <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
        <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../../bower_components/highlight/src/highlight.pack.js"></script>

        <script> hljs.initHighlightingOnLoad(); </script>

    </head>
    <body>
        <header class="container-fluid">
            <div class="row">
                <div class="col-xs-12">
                    <a href="../../">
                        <img alt="Silly Bytes" id="logo" class="image-responsive" src="../../img/silly-bytes_logo.png" />
                    </a>
                </div>
            </div>
        </header>

        <div id="blog" class="container-fluid">
            <div class="row">

                <div id="sidebar" class="hidden-xs hidden-sm col-md-3">
                    <div id="author">
    <img id="author-pic" src="../../img/daniel.jpg">
    <h3 id="author-name">Daniel Campoverde [alx741]</h3>
    <img id="location-icon" src="../../img/location_icon.png">
    <span id="location">Cuenca, Ecuador</span>
</div>

<div id="findme">
    <h2 class="sidebar-h2">FIND ME</h2>
    <a target="_blank" href="https://gitlab.com/alx741">
        <img class="icon" src="../../img/gitlab.png">
    </a>
    <a target="_blank" href="https://github.com/alx741">
        <img class="icon" src="../../img/github.png">
    </a>
    <a target="_blank" href="https://twitter.com/alx741alx">
        <img class="icon" src="../../img/twitter.png">
    </a>
    <a target="_blank" href="https://www.facebook.com/sillybytes/">
        <img class="icon" src="../../img/facebook.png">
    </a>
    <a target="_blank" href="https://plus.google.com/116038619580828681039">
        <img class="icon" src="../../img/google.png">
    </a>

    <div id="findme-textual">
        <b>Freenode:</b> #vim, #archlinux, #avr, #rust, #haskell,
        #yesod, #zsh
        <hr>
        <b>Mailto:</b> alx@sillybytes.net
        <br>
        <b>GPG Key ID:</b> <a href="http://pgp.mit.edu/pks/lookup?op=get&search=0xEB0E776276450F22">76450F22</a>
        <hr>
        <b>Subscribe:</b> <a href="http://www.sillybytes.net/atom.xml">
            <img id="rss-img" alt="rss" src="../../img/rss.png" /> </a>
    </div>


    <div id="facebook-embed">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fsillybytes&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=true&amp;stream=false&amp;show_border=true" scrolling="yes" style="border:none; overflow:hidden;" allowtransparency="false" frameborder="0"></iframe>
    </div>
</div>

<div id="random">
    <h2 class="sidebar-h2">YOU MIGHT LIKE</h2>

    <div id="random-posts">
        <ul>
        </ul>
    </div>
</div>

<div id="about">
    <h2 class="sidebar-h2">ABOUT</h2>

    <a target="_blank" href="http://www.haskellers.com/user/4344">
        <img id="haskellers-img" class="badge" alt="I'm a Haskeller" src="../../img/haskellers.png">
    </a>

    <img id="fsf-img" class="badge" alt="Free Software Fundation Member" src="../../img/fsf.png">

    <a target="_blank" href="http://internetdefenseleague.org/">
        <img id="idl-img" class="badge" alt="Internet Defesen League" src="../../img/idl.png">
    </a>
</div>

<div id="dotfiles">
    <h2 class="sidebar-h2">DOTFILES</h2>
    <p>
        Software configuration, scripts, tools and magic.
        Be sure to add <b>attribution </b> when using them
        (fully or partially).
    </p>
    <a target="_blank" href="https://github.com/alx741/dotfiles#readme">
        <img id="dotfiles-img" src="../../img/dotfiles.png">
    </a>
</div>


<div id="license">
    <h2 class="sidebar-h2">LICENSE</h2>

    <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
        <img id="cc-img" alt="Creative Commons - SA - BY" src="../../img/cc.png">
    </a>
    <p id="cc-text">
        Silly Bytes by Daniel Alejandro Campoverde Carrión
        [alx741] is licensed under a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported License.
        </a>
    </p>
</div>

                </div>

                <div id="content" class="col-xs-12 col-md-9">
                    <div class="row">
    <div class="post col-xs-12">
        <h2 class="post-title">Firefox control on steroids [Firefox + Ratpoison + Mozrepl]</h2>
        <div class="post-date-author">
            Posted on May 27, 2016
            
                by Daniel Campoverde
            
        </div>
        <div class="post-content">
            <p><img src="../../img/mozrepl/thumbnail.png" id="thumbnail" /><br />
</p>
<p>I’m not going to lie to you, what you’re about to read is really cool.</p>
<p>Controlling all sort of stuff with Ratpoison, as you can see in my previous posts, is pretty neat and you can extend it to control your browser as well.</p>
<p>These are the current capabilities:</p>
<p>Every command start with the Ratpoison prefix + ‘f’ like in <code>C-t f</code>:</p>
<!--more-->
<pre><code>**Command**     **Action**

    f           Facebook
    y           Youtube
    r           Reddit
    g           Github
    o           Open a new tab
    w           Open a new window
    s           Search for the current content in the clipboard
    /           Jump to the tab with url mathing a user input
    l           Open a new tab with the lyrics of the currenlty playing song (mpd)</code></pre>
<p>What does this do?, you might be wondering…</p>
<p>…Well, this does a little bit more than what you’re probably thinking.</p>
<p>Take for instance the <code>f</code> command, it has the <em>“Facebook”</em> action which means that:</p>
<p>No matter where you are, which window currently has the focus, or even if Firefox is not currently running. Firefox will be started (if needed) and will acquire the focus.</p>
<p>Then all your tabs will be parsed (starting from the last one), and if a Facebook tab is found then jump to it; if there is no Facebook tab opened then start a new one.</p>
<p>The same is applied to any of the other pages available (The list can be extended to suit you needs).</p>
<p>The <code>o</code> commands is self explanatory, the only advantage of this one is the ability to have a fast new tab no matter where you are, which window has the focus, or if Firefox is running or not.</p>
<p>The <code>s</code> command is quite nice, here is an use case:</p>
<p>You’re compiling some code, but the compiler complains with a cryptic message, so you use <a href="https://github.com/alx741/dotfiles/blob/master/tmux/.tmux.conf#L55-L59">tmux to copy the error message</a>, then issue the key sequence <code>C-t f /</code> and BANG!, no matter what, a new Firefox tab is just in front of you with the Google results of your error message. And this is applicable to any content in your clipboard as well!</p>
<p>The <code>/</code> command prompts the user for a query and jumps to the tab which URL contains the query as a substring.</p>
<p>The <code>l</code> will take the name of the currently playing song in MPD, google it, and open the first google result for the song lyrics in a new tab.</p>
<h1 id="how-to">How to</h1>
<p>The main dependencies of all this are:</p>
<ul>
<li>Firefox</li>
<li><a href="https://github.com/bard/mozrepl">Mozrepl</a></li>
<li>Ratpoison</li>
<li>Expect</li>
</ul>
<p>You can install them all with the system package manager, except for Mozrepl which you can get from Firefox addons.</p>
<p>This also depends on a Ratpoison <a href="https://github.com/alx741/dotfiles/blob/master/scripts/.scripts/ratpoison/app_select.sh">script</a> introduced in the previous posts, so be sure to have it.</p>
<p>Some extra <code>~/.ratpoisonrc</code> is needed for the new mappings:</p>
<pre><code>newkmap firefox
definekey firefox f exec ~/.scripts/ratpoison/firefox.sh select_tab facebook
definekey firefox y exec ~/.scripts/ratpoison/firefox.sh select_tab youtube
definekey firefox e exec ~/.scripts/ratpoison/firefox.sh select_tab evirtual
definekey firefox r exec ~/.scripts/ratpoison/firefox.sh select_tab reddit
definekey firefox g exec ~/.scripts/ratpoison/firefox.sh select_tab github
definekey firefox o exec ~/.scripts/ratpoison/firefox.sh new_tab
definekey firefox w exec ~/.scripts/ratpoison/firefox.sh new_window
definekey firefox s exec ~/.scripts/ratpoison/firefox.sh clipboard_search
definekey firefox l exec ~/.scripts/ratpoison/firefox.sh search_lyrics
definekey firefox slash exec ~/.scripts/ratpoison/firefox.sh search_tab
bind f readkey firefox</code></pre>
<p>Most of the magic is performed thanks to the amazing <em>Mozrepl</em>. Unfortunately I couldn’t get it to load an external script, but <em>Expect</em> is needed for the communication with it anyways, so lets give it the script line by line.</p>
<p>The <code>select_tab.js</code> <a href="https://github.com/alx741/dotfiles/blob/master/mozrepl/.mozrepl/select_tab.js">script</a> is on charge of parsing the tabs to find one that matches the query and jump to it.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">function</span> <span class="at">selectTab</span>(page) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">    <span class="kw">var</span> numTabs<span class="op">=</span><span class="va">gBrowser</span>.<span class="va">browsers</span>.<span class="at">length</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="kw">var</span> url<span class="op">=</span><span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">    <span class="cf">for</span>(i<span class="op">=</span>numTabs<span class="dv">-1</span><span class="op">;</span> i<span class="op">&gt;</span><span class="dv">0</span><span class="op">;</span> i<span class="op">--</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">        url<span class="op">=</span><span class="va">gBrowser</span>.<span class="at">browsers</span>[i].<span class="va">contentDocument</span>.<span class="va">location</span>.<span class="at">href</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">        <span class="cf">if</span>(<span class="va">url</span>.<span class="at">search</span>(page) <span class="op">!=</span> <span class="dv">-1</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">            <span class="va">gBrowser</span>.<span class="va">tabContainer</span>.<span class="at">selectedIndex</span><span class="op">=</span>i<span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">        <span class="op">}</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="op">}</span></a></code></pre></div>
<p>Use <em>Expect</em> and the <code>select_tab.expect</code> <a href="https://github.com/alx741/dotfiles/blob/master/mozrepl/.mozrepl/select_tab.expect">script</a> to perform the telnet communication with <em>Mozrepl</em> and send the script and commands as well.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">#!/usr/bin/expect</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">set</span> <span class="ex">page</span> [lindex <span class="va">$argv</span> 0]</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">set</span> <span class="ex">port</span> 4242</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">set</span> <span class="fu">file</span> [open <span class="st">&quot;select_tab.js&quot;</span>]</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">set</span> <span class="ex">content</span> [split [read <span class="va">$file</span>] <span class="st">&quot;\n&quot;</span>]</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="ex">close</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="ex">spawn</span> telnet localhost <span class="va">$port</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="ex">foreach</span> line <span class="va">$content</span> {</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="ex">send</span> <span class="st">&quot;</span><span class="va">$line</span><span class="st">\r&quot;</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="ex">send</span> <span class="st">&quot;selectTab(</span><span class="dt">\&quot;</span><span class="va">$page</span><span class="dt">\&quot;</span><span class="st">);\r&quot;</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="ex">expect</span> <span class="st">&quot;repl2&gt; &quot;</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="ex">expect</span> {</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">    <span class="st">&quot;true&quot;</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">        <span class="bu">exit</span> 0</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">    <span class="st">&quot;false&quot;</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">        <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21">}</a></code></pre></div>
<p>Now the <code>firefox.sh</code> <a href="https://github.com/alx741/dotfiles/blob/master/scripts/.scripts/ratpoison/firefox.sh">script</a>, invoked from the Ratpoison configuration, will glue it all together.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="va">URL=</span><span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">function</span><span class="fu"> set_url</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">        <span class="st">'facebook'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">            <span class="va">URL=</span><span class="st">&quot;www.facebook.com&quot;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">        <span class="st">'youtube'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">            <span class="va">URL=</span><span class="st">&quot;www.youtube.com&quot;</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">        <span class="st">'reddit'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13">            <span class="va">URL=</span><span class="st">&quot;www.reddit.com&quot;</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15">        <span class="st">'github'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16">            <span class="va">URL=</span><span class="st">&quot;www.github.com&quot;</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18">        <span class="st">'evirtual'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19">            <span class="va">URL=</span><span class="st">&quot;evirtual.ucuenca.edu.ec&quot;</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21">    <span class="kw">esac</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="kw">function</span><span class="fu"> select_tab</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25">    <span class="bu">cd</span> ~/.mozrepl/</a>
<a class="sourceLine" id="cb5-26" data-line-number="26">    <span class="ex">expect</span> select_tab.expect <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="op">&gt;</span> /dev/null</a>
<a class="sourceLine" id="cb5-27" data-line-number="27">    <span class="kw">if [[</span> <span class="va">$?</span> <span class="ot">!=</span> 0<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28">        <span class="ex">set_url</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29">        <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$URL</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30">            <span class="ex">firefox</span> --new-tab <span class="st">&quot;</span><span class="va">$URL</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31">        <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="kw">function</span><span class="fu"> search_tab</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36">    <span class="va">query=</span><span class="kw">`</span><span class="ex">ratpoison</span> -c <span class="st">&quot;prompt [Tab] &gt;  &quot;</span><span class="kw">`</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$query</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span> <span class="bu">exit</span> 0<span class="kw">;</span> <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38">    <span class="ex">select_tab</span> <span class="st">&quot;</span><span class="va">$query</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="kw">function</span><span class="fu"> clipboard_search</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42">    <span class="va">search=$(</span><span class="ex">xclip</span> -selection clipboard -o<span class="va">)</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$search</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44">        <span class="bu">exit</span> 0</a>
<a class="sourceLine" id="cb5-45" data-line-number="45">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46">    <span class="va">search=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$search</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/ /+/g'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47">    <span class="va">google_url=</span><span class="st">&quot;https://www.google.com/search?q=</span><span class="va">$search</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48">    <span class="ex">firefox</span> --new-tab <span class="st">&quot;</span><span class="va">$google_url</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="kw">function</span><span class="fu"> search_lyrics</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52">    <span class="va">search=$(</span><span class="ex">mpc</span> <span class="kw">|</span> <span class="fu">head</span> -n 1<span class="va">)</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53">    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$search</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54">        <span class="bu">exit</span> 0</a>
<a class="sourceLine" id="cb5-55" data-line-number="55">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56">    <span class="va">search+=</span><span class="st">&quot; lyrics&quot;</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57">    <span class="va">search=$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$search</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/ /+/g'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58">    <span class="ex">curl</span> -A <span class="st">'Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 Firefox/31.0'</span>\</a>
<a class="sourceLine" id="cb5-59" data-line-number="59">        <span class="st">&quot;https://www.google.com/search?q=</span><span class="va">$search</span><span class="st">&quot;</span>\</a>
<a class="sourceLine" id="cb5-60" data-line-number="60">            <span class="op">&gt;</span> /tmp/google_search_result.html</a>
<a class="sourceLine" id="cb5-61" data-line-number="61">    <span class="va">url=$(</span><span class="fu">sed</span> <span class="st">'s/&gt;/&gt;\r\n/g'</span> /tmp/google_search_result.html\</a>
<a class="sourceLine" id="cb5-62" data-line-number="62">        <span class="kw">|</span> <span class="fu">grep</span> -m 1 <span class="st">'&lt;a href=&quot;http:.*&quot;.*&gt;'</span>\</a>
<a class="sourceLine" id="cb5-63" data-line-number="63">        <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">'s/.*href=&quot;\([^&quot;]*\)&quot;.*/\1/'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb5-64" data-line-number="64">    <span class="ex">firefox</span> --new-tab <span class="st">&quot;</span><span class="va">$url</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-65" data-line-number="65"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-66" data-line-number="66"></a>
<a class="sourceLine" id="cb5-67" data-line-number="67"><span class="kw">case</span> <span class="va">$1</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb5-68" data-line-number="68">    <span class="st">'select_tab'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-69" data-line-number="69">        <span class="ex">~/.scripts/ratpoison/app_select.sh</span> firefox</a>
<a class="sourceLine" id="cb5-70" data-line-number="70">        <span class="ex">select_tab</span> <span class="va">$2</span></a>
<a class="sourceLine" id="cb5-71" data-line-number="71">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-72" data-line-number="72">    <span class="st">'search_tab'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-73" data-line-number="73">        <span class="ex">search_tab</span></a>
<a class="sourceLine" id="cb5-74" data-line-number="74">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-75" data-line-number="75">    <span class="st">'new_tab'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-76" data-line-number="76">        <span class="ex">~/.scripts/ratpoison/app_select.sh</span> firefox</a>
<a class="sourceLine" id="cb5-77" data-line-number="77">        <span class="ex">firefox</span> --new-tab <span class="st">&quot;http://www.google.com&quot;</span></a>
<a class="sourceLine" id="cb5-78" data-line-number="78">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-79" data-line-number="79">    <span class="st">'new_window'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-80" data-line-number="80">        <span class="ex">ratpoison</span> -c <span class="st">&quot;nextscreen&quot;</span></a>
<a class="sourceLine" id="cb5-81" data-line-number="81">        <span class="ex">firefox</span> --new-window <span class="st">&quot;http://www.google.com&quot;</span></a>
<a class="sourceLine" id="cb5-82" data-line-number="82">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-83" data-line-number="83">    <span class="st">'clipboard_search'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-84" data-line-number="84">        <span class="ex">~/.scripts/ratpoison/app_select.sh</span> firefox</a>
<a class="sourceLine" id="cb5-85" data-line-number="85">        <span class="ex">clipboard_search</span></a>
<a class="sourceLine" id="cb5-86" data-line-number="86">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-87" data-line-number="87">    <span class="st">'search_lyrics'</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb5-88" data-line-number="88">        <span class="ex">~/.scripts/ratpoison/app_select.sh</span> firefox</a>
<a class="sourceLine" id="cb5-89" data-line-number="89">        <span class="ex">search_lyrics</span></a>
<a class="sourceLine" id="cb5-90" data-line-number="90">        <span class="kw">;;</span></a>
<a class="sourceLine" id="cb5-91" data-line-number="91"><span class="kw">esac</span></a></code></pre></div>
<p>You can find all those scripts and configuration bits in my <a href="https://github.com/alx741/dotfiles">Dotfiles</a>.</p>
        </div>
    </div>
</div>


                    <div class="row">
                        <div class="col-sm-4">
                            
                        </div>

                        <div class="col-sm-4">
                            <a class="archive" href="../../archive.html">Archive</a>
                        </div>

                        <div class="col-sm-4">
                            
                        </div>
                    </div>
                </div>

            </div>
        </div>


        <footer class="container-fluid">
            <div class="row">
                <div id="sidebar" class="visible-xs visible-sm col-xs-12">
                    <div id="author">
    <img id="author-pic" src="../../img/daniel.jpg">
    <h3 id="author-name">Daniel Campoverde [alx741]</h3>
    <img id="location-icon" src="../../img/location_icon.png">
    <span id="location">Cuenca, Ecuador</span>
</div>

<div id="findme">
    <h2 class="sidebar-h2">FIND ME</h2>
    <a target="_blank" href="https://gitlab.com/alx741">
        <img class="icon" src="../../img/gitlab.png">
    </a>
    <a target="_blank" href="https://github.com/alx741">
        <img class="icon" src="../../img/github.png">
    </a>
    <a target="_blank" href="https://twitter.com/alx741alx">
        <img class="icon" src="../../img/twitter.png">
    </a>
    <a target="_blank" href="https://www.facebook.com/sillybytes/">
        <img class="icon" src="../../img/facebook.png">
    </a>
    <a target="_blank" href="https://plus.google.com/116038619580828681039">
        <img class="icon" src="../../img/google.png">
    </a>

    <div id="findme-textual">
        <b>Freenode:</b> #vim, #archlinux, #avr, #rust, #haskell,
        #yesod, #zsh
        <hr>
        <b>Mailto:</b> alx@sillybytes.net
        <br>
        <b>GPG Key ID:</b> <a href="http://pgp.mit.edu/pks/lookup?op=get&search=0xEB0E776276450F22">76450F22</a>
        <hr>
        <b>Subscribe:</b> <a href="http://www.sillybytes.net/atom.xml">
            <img id="rss-img" alt="rss" src="../../img/rss.png" /> </a>
    </div>


    <div id="facebook-embed">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fsillybytes&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=true&amp;stream=false&amp;show_border=true" scrolling="yes" style="border:none; overflow:hidden;" allowtransparency="false" frameborder="0"></iframe>
    </div>
</div>

<div id="random">
    <h2 class="sidebar-h2">YOU MIGHT LIKE</h2>

    <div id="random-posts">
        <ul>
        </ul>
    </div>
</div>

<div id="about">
    <h2 class="sidebar-h2">ABOUT</h2>

    <a target="_blank" href="http://www.haskellers.com/user/4344">
        <img id="haskellers-img" class="badge" alt="I'm a Haskeller" src="../../img/haskellers.png">
    </a>

    <img id="fsf-img" class="badge" alt="Free Software Fundation Member" src="../../img/fsf.png">

    <a target="_blank" href="http://internetdefenseleague.org/">
        <img id="idl-img" class="badge" alt="Internet Defesen League" src="../../img/idl.png">
    </a>
</div>

<div id="dotfiles">
    <h2 class="sidebar-h2">DOTFILES</h2>
    <p>
        Software configuration, scripts, tools and magic.
        Be sure to add <b>attribution </b> when using them
        (fully or partially).
    </p>
    <a target="_blank" href="https://github.com/alx741/dotfiles#readme">
        <img id="dotfiles-img" src="../../img/dotfiles.png">
    </a>
</div>


<div id="license">
    <h2 class="sidebar-h2">LICENSE</h2>

    <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
        <img id="cc-img" alt="Creative Commons - SA - BY" src="../../img/cc.png">
    </a>
    <p id="cc-text">
        Silly Bytes by Daniel Alejandro Campoverde Carrión
        [alx741] is licensed under a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
            Creative Commons Attribution-ShareAlike 3.0 Unported License.
        </a>
    </p>
</div>

                </div>
            </div>
        </footer>

        <script type="text/javascript" src="../../js/random_posts.js"></script>

    </body>
</html>
