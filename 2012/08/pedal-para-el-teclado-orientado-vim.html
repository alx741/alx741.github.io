<!doctype html>
<html lang="en">
    <head>
        <title>Silly Bytes</title>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" type="image/png" href="../../img/favicon.png" />

        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/post.css" />
        <link rel="stylesheet" href="../../css/about.css" />
    </head>


    <body>

        <header>
            <navbar class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    <a class="navbar-item" href="../../index.html">
                        <b>Silly Bytes</b>
                    </a>
                </div>

                <div class="navbar-end">
                    <a href="../../index.html" class="navbar-item">Home</a>
                    <a href="../../about.html" class="navbar-item">About</a>
                </div>
            </navbar>
        </header>


        <div id="main" class="container is-max-desktop">
            <article class="post">
    <h1 class="is-size-2 has-text-weight-medium has-text-left">Keyboard pedal for Vim</h2>
    <aside class="date has-text-left">August 20, 2012</aside>

    <section class="post-content">
        <p><img src="../../img/vimpedal/thumbnail.png" id="thumbnail" /><br />
</p>
<p>I’ve seen a VIM USB pedal tutorial before that triggers the <code>i</code> key, so we’re able to enter in <em>Insertion</em> mode with our foot.</p>
<p>I want to build something similar, but want to put effort in practical utility and simplicity. So i thought that trigger the <code>Esc</code> key would be more convenient due to the small, although cumbersome arm movement that requires to reach it. And you know, the <code>i</code> key is just under your finger so there’s no much of a time saving using a pedal.</p>
<!--more-->
<p>I’ve decided that the pedal should be directly attached to the keyboard circuitry, so here is what I’ve done.</p>
<h1 id="materials">Materials</h1>
<ul>
<li>Telephone cable (4 wires inside), every kind of cable can be used (we need just 2 wires)</li>
</ul>
<p><img src="../../img/vimpedal/shot1.jpg" class="img-responsive" /></p>
<ul>
<li>NA Interrupter</li>
</ul>
<p><img src="../../img/vimpedal/shot2.jpg" class="img-responsive" /></p>
<ul>
<li>Cassette case</li>
</ul>
<p><img src="../../img/vimpedal/shot3.jpg" class="img-responsive" /></p>
<p>Of course you can change this materials with what you have in home.</p>
<h1 id="construction">Construction</h1>
<h2 id="software">Software</h2>
<p>When we push a key an interrupter is activated and two contacts are connected at the keyboard integrated circuit which sends the appropriate <em>ScanCode</em>, which is then converted to a <em>KeyCode</em> that the OS can handle.</p>
<p>Based on this we need to find out which combination of contacts at the circuitry correspond to the required key, so we have two options for this:</p>
<ul>
<li><p>Disassemble the keyboard en follow all the traces from the key to the circuitry (and use a marker for this), but is a little boring and annoying task.</p></li>
<li><p>Use software that tell us what <em>KeyCode</em> has been received so we can use a wire to connect every possible combination in the keyboard circuitry until we find the correct one. I’m using GNU/Linux so the <code>showkey</code> command will come in handy for this.</p></li>
</ul>
<p>If you choose the first option just mark down which two contacts are the appropriate. But if you choose the second option we need no know something: The people who wrote <em>showkey</em> decided that the software should automatically close after 10 seconds after last key press, so we need to deal with this with two more options:</p>
<ul>
<li><p>Modify <code>showkey</code> source code to remove that timeout</p></li>
<li><p>Execute it with a shell infinite loop (I’ve choose this one)</p></li>
</ul>
<p>For option number 2 here is the solution (as root):</p>
<pre><code># while [ 1=1 ]; do showkey -k; sleep 1; done</code></pre>
<p>This way <code>showkey</code> will show us every key press (press and release).</p>
<p><img src="../../img/vimpedal/shot4.jpg" class="img-responsive" /></p>
<h2 id="hardware">Hardware</h2>
<p>Now we can disassemble the keyboard (with the shell loop running), take off the circuitry and use a wire to connect every contact until the appropriate <em>keycode</em> shows up in screen, in this case we’re looking for a <em>keycode</em> <strong>1</strong>, that corresponds with <code>Esc</code> key.</p>
<p>I’ve found it connecting pin #3 in the first row with pin #5 in the second row.</p>
<p>Now we can scratch the pins surface a little bit to revel the copper, but just enough so we can solder the wires (a couple millimeters will be ok).</p>
<p>(In this picture I’ve used incorrect pins. I’ve used pins 5-3 instead of 3-5, sorry..)</p>
<p><img src="../../img/vimpedal/shot5.jpg" class="img-responsive" /></p>
<p>Now we can solder the wires to the pins:</p>
<p><img src="../../img/vimpedal/shot6.jpg" class="img-responsive" /> <img src="../../img/vimpedal/shot7.jpg" class="img-responsive" /></p>
<p>Ok!, now just put the circuitry back in place, and use some hot glue so the wires stay in place.</p>
<p><img src="../../img/vimpedal/shot8.jpg" class="img-responsive" /></p>
<p>Lets take a look on the pedal side:</p>
<p>Glue the switch in the cassette case and solder the wires in the interrupter pins.</p>
<p><img src="../../img/vimpedal/shot9.jpg" class="img-responsive" /></p>
<p>Now we can have our fingers always in the home row while editing.</p>
    </section>
</article>


            <nav class="pagination is-medium">
                

                
            </nav>
        </div>

    </body>

</html>
